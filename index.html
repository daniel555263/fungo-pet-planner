<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FunGo - 和毛孩子一起探索世界</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body { 
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background: #f8f9fa;
      min-height: 100vh;
      color: #1a1a1a;
      overflow-x: hidden;
    }

    /* 动画 */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-6px); }
      60% { transform: translateY(-3px); }
    }

    @keyframes pawWalk {
      0% { opacity: 0.3; transform: scale(0.9) rotate(-15deg); }
      50% { opacity: 0.6; transform: scale(1.1) rotate(-5deg); }
      100% { opacity: 0.4; transform: scale(0.9) rotate(-20deg); }
    }

    .fade-in { animation: fadeIn 0.3s ease-out; }
    .bounce-ball { animation: bounce 2s infinite; }

    /* 通用样式 */
    .container {
      min-height: 100vh;
      background: #f8f9fa;
      position: relative;
    }

    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 80px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }

    .content {
      padding-top: 80px;
      padding-bottom: 40px;
      min-height: 100vh;
    }

    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 80px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-top: 1px solid rgba(0, 0, 0, 0.05);
      display: flex;
      justify-content: center;
      align-items: center;
      padding-bottom: 20px;
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      color: #4A90E2;
      font-size: 14px;
      cursor: pointer;
      padding: 8px 16px;
      font-weight: 500;
    }

    .nav-icon {
      font-size: 24px;
    }

    /* 首页样式 */
    .welcome-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px 20px;
      text-align: center;
      min-height: calc(100vh - 160px);
      justify-content: center;
    }

    .logo-section {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-bottom: 16px;
    }

    .logo-text {
      font-size: 48px;
      font-weight: 800;
      background: linear-gradient(135deg, #2C3E50 0%, #4A90E2 50%, #E67E22 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      letter-spacing: -2px;
    }

    .logo-ball {
      width: 16px;
      height: 16px;
      background: #E67E22;
      border-radius: 50%;
    }

    .tagline {
      font-size: 18px;
      color: #7f8c8d;
      font-weight: 500;
      margin-bottom: 60px;
      letter-spacing: 1px;
    }

    .welcome-title {
      font-size: 32px;
      font-weight: 600;
      margin-bottom: 16px;
      color: #2c3e50;
    }

    .welcome-desc {
      font-size: 16px;
      color: #7f8c8d;
      line-height: 1.6;
      max-width: 300px;
      margin-bottom: 50px;
    }

    .paw-trail-container {
      position: relative;
      width: 260px;
      height: 100px;
      margin: 30px auto;
    }

    .paw-print {
      position: absolute;
      font-size: 14px;
      animation: pawWalk 4s infinite;
      color: #bdc3c7;
    }

    .paw-print:nth-child(1) { left: 20px; top: 70px; animation-delay: 0s; }
    .paw-print:nth-child(2) { left: 50px; top: 50px; animation-delay: 0.4s; }
    .paw-print:nth-child(3) { left: 80px; top: 30px; animation-delay: 0.8s; }
    .paw-print:nth-child(4) { left: 110px; top: 20px; animation-delay: 1.2s; }
    .paw-print:nth-child(5) { left: 140px; top: 30px; animation-delay: 1.6s; }
    .paw-print:nth-child(6) { left: 170px; top: 50px; animation-delay: 2.0s; }
    .paw-print:nth-child(7) { left: 200px; top: 70px; animation-delay: 2.4s; }

    .paw-end {
      position: absolute;
      right: 10px;
      top: 10px;
      font-size: 24px;
      animation: bounce 2s infinite;
      animation-delay: 2.8s;
    }

    .create-trip-btn {
      background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
      color: white;
      border: none;
      border-radius: 25px;
      padding: 18px 40px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 8px 24px rgba(74, 144, 226, 0.25);
      letter-spacing: 0.5px;
    }

    .create-trip-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 32px rgba(74, 144, 226, 0.35);
    }

    .create-trip-btn:active {
      transform: scale(0.98);
    }

    .add-btn {
      position: absolute;
      top: 25px;
      right: 20px;
      width: 32px;
      height: 32px;
      background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 18px;
      cursor: pointer;
      z-index: 101;
      transition: transform 0.2s;
      border: none;
      box-shadow: 0 4px 12px rgba(74, 144, 226, 0.25);
    }

    .add-btn:active {
      transform: scale(0.95);
    }

    /* 行程卡片 */
    .trip-card {
      margin: 16px;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 8px 32px rgba(0,0,0,0.08);
      cursor: pointer;
      transition: all 0.3s ease;
      background: white;
    }

    .trip-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 16px 48px rgba(0,0,0,0.12);
    }

    .trip-card-image {
      width: 100%;
      height: 160px;
      background-size: cover;
      background-position: center;
      position: relative;
    }

    .trip-card-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, transparent 40%, rgba(0,0,0,0.7));
      padding: 16px;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
    }

    .trip-date {
      color: white;
      font-size: 13px;
      margin-bottom: 4px;
      opacity: 0.9;
    }

    .trip-destination {
      color: white;
      font-size: 18px;
      font-weight: 600;
    }

    .trip-card-content {
      padding: 16px;
      background: white;
    }

    .trip-tags {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
    }

    .trip-tag {
      padding: 4px 10px;
      background: #E8F4FD;
      border-radius: 12px;
      font-size: 11px;
      display: flex;
      align-items: center;
      gap: 4px;
      color: #4A90E2;
      font-weight: 500;
    }

    .trip-info-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 8px;
      color: #2c3e50;
    }

    .trip-info-detail {
      font-size: 13px;
      color: #7f8c8d;
      display: flex;
      align-items: center;
      gap: 6px;
      margin-bottom: 4px;
    }

    .see-plan-btn {
      width: 100%;
      background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
      color: white;
      border: none;
      border-radius: 16px;
      padding: 12px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      margin-top: 12px;
    }

    /* 表单样式 */
    .form-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      padding: 20px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      z-index: 100;
    }

    .header-row {
      display: flex;
      align-items: center;
      margin-bottom: 16px;
    }

    .back-btn {
      font-size: 20px;
      cursor: pointer;
      background: none;
      border: none;
      padding: 0;
      margin-right: 16px;
      color: #4A90E2;
    }

    .progress-bar {
      height: 4px;
      background: #ecf0f1;
      border-radius: 2px;
      position: relative;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #4A90E2 0%, #357ABD 100%);
      border-radius: 2px;
      transition: width 0.3s;
    }

    .step-indicator {
      position: absolute;
      top: -24px;
      right: 0;
      font-size: 13px;
      color: #4A90E2;
      font-weight: 600;
    }

    .form-content {
      padding: 120px 20px 120px 20px;
      min-height: 100vh;
    }

    .step-icon {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      margin-bottom: 20px;
      box-shadow: 0 8px 24px rgba(74, 144, 226, 0.25);
    }

    .step-title {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 8px;
      color: #2c3e50;
    }

    .step-desc {
      font-size: 16px;
      color: #7f8c8d;
      margin-bottom: 32px;
      line-height: 1.5;
    }

    .current-location-card {
      background: linear-gradient(135deg, #E8F4FD 0%, #D6EAF8 100%);
      padding: 20px;
      border-radius: 16px;
      margin-bottom: 24px;
      display: flex;
      align-items: center;
      gap: 16px;
      cursor: pointer;
      transition: all 0.2s;
      border: 2px solid transparent;
    }

    .current-location-card.selected {
      border-color: #4A90E2;
      background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);
    }

    .location-icon {
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: white;
    }

    .location-info {
      flex: 1;
    }

    .location-name {
      font-size: 18px;
      font-weight: 600;
      color: #2c3e50;
      margin-bottom: 4px;
    }

    .location-desc {
      font-size: 14px;
      color: #7f8c8d;
    }

    .weather-info {
      text-align: right;
      font-size: 14px;
    }

    .weather-temp {
      color: #4A90E2;
      font-weight: 600;
    }

    .weather-desc {
      color: #7f8c8d;
      margin-top: 2px;
    }

    .section-title {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 16px;
      color: #2c3e50;
    }

    .destinations-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-bottom: 16px;
    }

    .destination-item {
      padding: 16px;
      background: white;
      border-radius: 16px;
      cursor: pointer;
      transition: all 0.2s;
      border: 2px solid transparent;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }

    .destination-item.selected {
      border-color: #4A90E2;
      background: linear-gradient(135deg, #E8F4FD 0%, #D6EAF8 100%);
    }

    .destination-flag {
      font-size: 24px;
      margin-bottom: 8px;
    }

    .destination-name {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 4px;
      color: #2c3e50;
    }

    .destination-distance {
      font-size: 12px;
      color: #7f8c8d;
    }

    .custom-destination {
      border: 2px dashed #bdc3c7;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100px;
    }

    .custom-destination:hover {
      border-color: #4A90E2;
      background: #f8f9fa;
    }

    .duration-counter {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 32px;
      margin: 50px 0;
    }

    .counter-btn {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      border: 2px solid #ecf0f1;
      background: white;
      font-size: 20px;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #2c3e50;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }

    .counter-btn:hover {
      border-color: #4A90E2;
      background: #f8f9fa;
    }

    .counter-btn:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .counter-value {
      font-size: 40px;
      font-weight: 700;
      min-width: 120px;
      text-align: center;
      color: #4A90E2;
    }

    .calendar-container {
      background: white;
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.08);
    }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .calendar-title {
      font-size: 20px;
      font-weight: 600;
      color: #2c3e50;
    }

    .calendar-nav {
      display: flex;
      gap: 16px;
    }

    .calendar-nav-btn {
      background: none;
      border: none;
      color: #4A90E2;
      font-size: 20px;
      cursor: pointer;
      padding: 8px;
      border-radius: 8px;
      transition: background 0.2s;
    }

    .calendar-nav-btn:hover {
      background: #f8f9fa;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 4px;
    }

    .calendar-day-header {
      text-align: center;
      font-size: 13px;
      color: #7f8c8d;
      padding: 12px 4px;
      font-weight: 600;
    }

    .calendar-day {
      aspect-ratio: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      cursor: pointer;
      border-radius: 12px;
      transition: all 0.2s;
    }

    .calendar-day:hover:not(.other-month):not([style*="opacity: 0.3"]) {
      background: #f8f9fa;
    }

    .calendar-day.other-month {
      color: #d5d8dc;
    }

    .calendar-day.selected {
      background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
      color: white;
    }

    .calendar-day.in-range {
      background: #E8F4FD;
      color: #4A90E2;
    }

    .calendar-day.today {
      color: #4A90E2;
      font-weight: 700;
      border: 2px solid #4A90E2;
    }

    .pets-list {
      margin: 24px 0;
    }

    .pet-card {
      padding: 16px;
      background: white;
      border-radius: 16px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      transition: transform 0.2s;
    }

    .pet-card:hover {
      transform: translateY(-2px);
    }

    .pet-avatar {
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, #E67E22 0%, #D35400 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: white;
    }

    .pet-info {
      flex: 1;
    }

    .pet-name {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 2px;
      color: #2c3e50;
    }

    .pet-details {
      font-size: 13px;
      color: #7f8c8d;
    }

    .pet-edit-btn {
      background: none;
      border: none;
      color: #7f8c8d;
      font-size: 16px;
      cursor: pointer;
      padding: 8px;
    }

    .add-pet-btn {
      width: 100%;
      padding: 16px;
      background: transparent;
      border: 2px dashed #4A90E2;
      border-radius: 16px;
      color: #4A90E2;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: all 0.2s;
    }

    .add-pet-btn:hover {
      background: rgba(74, 144, 226, 0.05);
    }

    .next-btn {
      position: fixed;
      bottom: 30px;
      left: 20px;
      right: 20px;
      background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
      color: white;
      border: none;
      border-radius: 25px;
      padding: 18px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 8px 24px rgba(74, 144, 226, 0.25);
      letter-spacing: 0.5px;
    }

    .next-btn:disabled {
      background: #bdc3c7;
      cursor: not-allowed;
      box-shadow: none;
    }

    .next-btn:not(:disabled):hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 32px rgba(74, 144, 226, 0.35);
    }

    .next-btn:not(:disabled):active {
      transform: scale(0.98);
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useEffect } = React;

    // 数据配置
    const CONFIG = {
      // 深圳周边自驾游目的地
      nearbyDestinations: [
        { id: 'dongshan', name: '东山岛', distance: '4小时车程', flag: '🏝️' },
        { id: 'dameisha', name: '大梅沙', distance: '1小时车程', flag: '🏖️' },
        { id: 'yangmeikeng', name: '杨梅坑', distance: '1.5小时车程', flag: '🌊' }
      ],
      pets: [
        { id: 1, name: '旺财', age: '3岁', breed: '金毛', weight: '28kg' },
        { id: 2, name: '小白', age: '2岁', breed: '比熊', weight: '8kg' }
      ]
    };

    const App = () => {
      const [trips, setTrips] = useState([]);
      const [isCreating, setIsCreating] = useState(false);
      const [currentStep, setCurrentStep] = useState(1);
      const [pets, setPets] = useState(CONFIG.pets);
      
      const [formData, setFormData] = useState({
        destination: '',
        isLocal: false,
        duration: 3,
        startDate: null,
        endDate: null,
        selectedPets: []
      });

      const handleCreateTrip = () => {
        setIsCreating(true);
        setCurrentStep(1);
      };

      const handleNextStep = () => {
        if (currentStep < (formData.isLocal ? 2 : 4)) {
          setCurrentStep(currentStep + 1);
        } else {
          const newTrip = {
            id: Date.now(),
            ...formData,
            createdAt: new Date()
          };
          setTrips([...trips, newTrip]);
          setIsCreating(false);
          setCurrentStep(1);
          setFormData({
            destination: '',
            isLocal: false,
            duration: 3,
            startDate: null,
            endDate: null,
            selectedPets: []
          });
        }
      };

      const handleBackStep = () => {
        if (currentStep > 1) {
          setCurrentStep(currentStep - 1);
        } else {
          setIsCreating(false);
        }
      };

      const renderMainView = () => {
        if (isCreating) {
          return (
            <TripCreator 
              step={currentStep}
              formData={formData}
              setFormData={setFormData}
              onNext={handleNextStep}
              onBack={handleBackStep}
              pets={pets}
              setPets={setPets}
            />
          );
        }
        return <TripsView trips={trips} onCreateTrip={handleCreateTrip} />;
      };

      return (
        <div className="container">
          {renderMainView()}
          
          {!isCreating && (
            <div className="bottom-nav">
              <div className="nav-item">
                <span className="nav-icon">🎒</span>
                <span>行程</span>
              </div>
            </div>
          )}
        </div>
      );
    };

    const TripsView = ({ trips, onCreateTrip }) => {
      if (trips.length === 0) {
        return (
          <>
            <div className="header">
              <div className="logo-section">
                <h1 className="logo-text">FunGo</h1>
                <div className="logo-ball bounce-ball"></div>
              </div>
              <button className="add-btn" onClick={onCreateTrip}>+</button>
            </div>
            <div className="content">
              <div className="welcome-container fade-in">
                <div className="tagline">和毛孩子一起探索世界</div>
                
                <h2 className="welcome-title">开始您的宠物之旅</h2>
                <p className="welcome-desc">
                  为您和毛孩子规划完美的自驾游行程，
                  发现更多宠物友好的目的地。
                </p>
                
                <div className="paw-trail-container">
                  <span className="paw-print">🐾</span>
                  <span className="paw-print">🐾</span>
                  <span className="paw-print">🐾</span>
                  <span className="paw-print">🐾</span>
                  <span className="paw-print">🐾</span>
                  <span className="paw-print">🐾</span>
                  <span className="paw-print">🐾</span>
                  <div className="paw-end">🐕</div>
                </div>
                
                <button className="create-trip-btn" onClick={onCreateTrip}>
                  规划行程
                </button>
              </div>
            </div>
          </>
        );
      }

      return (
        <>
          <div className="header">
            <div className="logo-section">
              <h1 className="logo-text">FunGo</h1>
              <div className="logo-ball bounce-ball"></div>
            </div>
            <button className="add-btn" onClick={onCreateTrip}>+</button>
          </div>
          <div className="content">
            {trips.map(trip => <TripCard key={trip.id} trip={trip} />)}
          </div>
        </>
      );
    };

    const TripCard = ({ trip }) => {
      const formatDate = (date) => {
        if (!date) return '';
        const d = new Date(date);
        return `${d.getMonth() + 1}月${d.getDate()}日`;
      };

      const getDestinationName = () => {
        if (trip.isLocal) return '深圳本地';
        const dest = CONFIG.nearbyDestinations.find(d => d.id === trip.destination);
        return dest ? dest.name : '未知目的地';
      };

      return (
        <div className="trip-card fade-in">
          <div 
            className="trip-card-image"
            style={{ 
              backgroundImage: `url('https://source.unsplash.com/800x400/${getDestinationName()},travel,pet')`
            }}
          >
            <div className="trip-card-overlay">
              <div className="trip-date">
                {trip.isLocal ? '本地游' : `${formatDate(trip.startDate)} - ${formatDate(trip.endDate)}`}
              </div>
              <div className="trip-destination">
                {getDestinationName()}
              </div>
            </div>
          </div>
          
          <div className="trip-card-content">
            <div className="trip-tags">
              <div className="trip-tag">
                <span>🐕</span>
                <span>宠物友好</span>
              </div>
              <div className="trip-tag">
                <span>🚗</span>
                <span>自驾游</span>
              </div>
            </div>
            
            <div className="trip-info-title">{getDestinationName()}</div>
            <div className="trip-info-detail">
              <span>📅</span> 
              {trip.isLocal ? '随时出发' : `${formatDate(trip.startDate)}, 2025`}
            </div>
            <div className="trip-info-detail">
              <span>⏱️</span> 
              {trip.isLocal ? '本地探索' : `${trip.duration} 天行程`}
            </div>
            
            <button className="see-plan-btn">查看行程</button>
          </div>
        </div>
      );
    };

    const TripCreator = ({ step, formData, setFormData, onNext, onBack, pets, setPets }) => {
      const totalSteps = formData.isLocal ? 2 : 4;
      const progress = (step / totalSteps) * 100;

      const renderStepContent = () => {
        switch (step) {
          case 1:
            return <DestinationStep formData={formData} setFormData={setFormData} />;
          case 2:
            if (formData.isLocal) {
              return <PetSelectionStep formData={formData} setFormData={setFormData} pets={pets} setPets={setPets} />;
            } else {
              return <DurationStep formData={formData} setFormData={setFormData} />;
            }
          case 3:
            return <DateStep formData={formData} setFormData={setFormData} />;
          case 4:
            return <PetSelectionStep formData={formData} setFormData={setFormData} pets={pets} setPets={setPets} />;
          default:
            return null;
        }
      };

      const isStepValid = () => {
        switch (step) {
          case 1:
            return !!formData.destination || formData.isLocal;
          case 2:
            return formData.isLocal ? formData.selectedPets.length > 0 : formData.duration > 0;
          case 3:
            return !!formData.startDate;
          case 4:
            return formData.selectedPets.length > 0;
          default:
            return false;
        }
      };

      return (
        <>
          <div className="form-header">
            <div className="header-row">
              <button className="back-btn" onClick={onBack}>‹</button>
            </div>
            <div className="progress-bar">
              <div className="progress-fill" style={{ width: `${progress}%` }}></div>
              <span className="step-indicator">第 {step}/{totalSteps} 步</span>
            </div>
          </div>
          
          <div className="form-content">
            {renderStepContent()}
          </div>
          
          <button 
            className="next-btn" 
            onClick={onNext}
            disabled={!isStepValid()}
          >
            {step === totalSteps ? '完成创建' : '下一步'}
          </button>
        </>
      );
    };

    const DestinationStep = ({ formData, setFormData }) => {
      const handleLocationSelect = (isLocal, destinationId = null) => {
        setFormData({ 
          ...formData, 
          isLocal, 
          destination: destinationId,
          // 如果选择本地，清空日期和天数
          ...(isLocal ? { startDate: null, endDate: null, duration: 0 } : {})
        });
      };

      return (
        <div className="fade-in">
          <div className="step-icon">
            <span style={{ color: 'white' }}>📍</span>
          </div>
          <h2 className="step-title">选择目的地</h2>
          <p className="step-desc">您想要本地探索还是外出旅行？</p>
          
          <div 
            className={`current-location-card ${formData.isLocal ? 'selected' : ''}`}
            onClick={() => handleLocationSelect(true)}
          >
            <div className="location-icon">📍</div>
            <div className="location-info">
              <div className="location-name">深圳本地</div>
              <div className="location-desc">探索身边的宠物友好场所</div>
            </div>
            <div className="weather-info">
              <div className="weather-temp">24°C</div>
              <div className="weather-desc">晴朗</div>
            </div>
          </div>
          
          <div className="section-title">周边自驾游</div>
          <div className="destinations-grid">
            {CONFIG.nearbyDestinations.map(dest => (
              <div 
                key={dest.id}
                className={`destination-item ${formData.destination === dest.id ? 'selected' : ''}`}
                onClick={() => handleLocationSelect(false, dest.id)}
              >
                <div className="destination-flag">{dest.flag}</div>
                <div className="destination-name">{dest.name}</div>
                <div className="destination-distance">{dest.distance}</div>
              </div>
            ))}
            
            <div className="destination-item custom-destination">
              <div style={{ fontSize: '24px', marginBottom: '8px' }}>➕</div>
              <div className="destination-name">自定义</div>
            </div>
          </div>
        </div>
      );
    };

    const DurationStep = ({ formData, setFormData }) => {
      const handleIncrease = () => {
        setFormData({ ...formData, duration: formData.duration + 1 });
      };

      const handleDecrease = () => {
        if (formData.duration > 1) {
          setFormData({ ...formData, duration: formData.duration - 1 });
        }
      };

      return (
        <div className="fade-in">
          <div className="step-icon">
            <span style={{ color: 'white' }}>📅</span>
          </div>
          <h2 className="step-title">旅行天数</h2>
          <p className="step-desc">您计划旅行几天？</p>
          
          <div className="duration-counter">
            <button 
              className="counter-btn" 
              onClick={handleDecrease}
              disabled={formData.duration <= 1}
            >
              −
            </button>
            <div className="counter-value">
              {formData.duration} 天
            </div>
            <button 
              className="counter-btn" 
              onClick={handleIncrease}
            >
              +
            </button>
          </div>
        </div>
      );
    };

    const DateStep = ({ formData, setFormData }) => {
      const [currentMonth, setCurrentMonth] = useState(new Date());

      const getDaysInMonth = (date) => {
        const year = date.getFullYear();
        const month = date.getMonth();
        const firstDay = new Date(year, month, 1);
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        const startingDayOfWeek = firstDay.getDay();
        
        const days = [];
        
        for (let i = startingDayOfWeek - 1; i >= 0; i--) {
          const prevDate = new Date(year, month - 1, new Date(year, month, 0).getDate() - i);
          days.push({ date: prevDate, isOtherMonth: true });
        }
        
        for (let i = 1; i <= daysInMonth; i++) {
          days.push({ date: new Date(year, month, i), isOtherMonth: false });
        }
        
        const remainingDays = 42 - days.length;
        for (let i = 1; i <= remainingDays; i++) {
          days.push({ date: new Date(year, month + 1, i), isOtherMonth: true });
        }
        
        return days;
      };

      const handleDateClick = (date) => {
        const startDate = new Date(date);
        const endDate = new Date(date);
        endDate.setDate(endDate.getDate() + formData.duration - 1);
        
        setFormData({ 
          ...formData, 
          startDate: startDate.toISOString(),
          endDate: endDate.toISOString()
        });
      };

      const isInRange = (date) => {
        if (!formData.startDate || !formData.endDate) return false;
        const start = new Date(formData.startDate);
        const end = new Date(formData.endDate);
        return date >= start && date <= end;
      };

      const isStartOrEnd = (date) => {
        if (!formData.startDate) return false;
        const start = new Date(formData.startDate);
        const end = new Date(formData.endDate);
        return date.toDateString() === start.toDateString() || date.toDateString() === end.toDateString();
      };

      const formatMonthYear = (date) => {
        return `${date.getFullYear()}年 ${date.getMonth() + 1}月`;
      };

      const days = getDaysInMonth(currentMonth);
      const today = new Date();

      return (
        <div className="fade-in">
          <div className="step-icon">
            <span style={{ color: 'white' }}>📅</span>
          </div>
          <h2 className="step-title">选择日期</h2>
          <p className="step-desc">请选择您的出发日期</p>
          
          <div className="calendar-container">
            <div className="calendar-header">
              <button 
                className="calendar-nav-btn"
                onClick={() => setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1))}
              >
                ‹
              </button>
              <div className="calendar-title">{formatMonthYear(currentMonth)}</div>
              <button 
                className="calendar-nav-btn"
                onClick={() => setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1))}
              >
                ›
              </button>
            </div>
            
            <div className="calendar-grid">
              {['日', '一', '二', '三', '四', '五', '六'].map(day => (
                <div key={day} className="calendar-day-header">{day}</div>
              ))}
              
              {days.map((day, index) => {
                const isToday = day.date.toDateString() === today.toDateString();
                const isSelected = isStartOrEnd(day.date);
                const inRange = isInRange(day.date);
                const isPast = day.date < today && !isToday;
                
                return (
                  <div 
                    key={index}
                    className={`calendar-day ${day.isOtherMonth ? 'other-month' : ''} ${isSelected ? 'selected' : ''} ${inRange && !isSelected ? 'in-range' : ''} ${isToday ? 'today' : ''}`}
                    onClick={() => !day.isOtherMonth && !isPast && handleDateClick(day.date)}
                    style={{ 
                      opacity: isPast ? 0.3 : 1,
                      cursor: isPast || day.isOtherMonth ? 'not-allowed' : 'pointer'
                    }}
                  >
                    {day.date.getDate()}
                  </div>
                );
              })}
            </div>
          </div>
        </div>
      );
    };

    const PetSelectionStep = ({ formData, setFormData, pets, setPets }) => {
      const handlePetSelect = (petId) => {
        const isSelected = formData.selectedPets.includes(petId);
        const newSelection = isSelected 
          ? formData.selectedPets.filter(id => id !== petId)
          : [...formData.selectedPets, petId];
        
        setFormData({ ...formData, selectedPets: newSelection });
      };

      const handleAddPet = () => {
        const newPet = {
          id: Date.now(),
          name: '新伙伴',
          age: '1岁',
          breed: '品种',
          weight: '5kg'
        };
        setPets([...pets, newPet]);
      };

      return (
        <div className="fade-in">
          <div className="step-icon">
            <span style={{ color: 'white' }}>🐕</span>
          </div>
          <h2 className="step-title">同行伙伴</h2>
          <p className="step-desc">选择这次旅行的毛孩子伙伴</p>
          
          <div className="pets-list">
            {pets.map(pet => (
              <div 
                key={pet.id}
                className="pet-card"
                onClick={() => handlePetSelect(pet.id)}
                style={{ 
                  border: formData.selectedPets.includes(pet.id) ? '2px solid #4A90E2' : '2px solid transparent',
                  background: formData.selectedPets.includes(pet.id) ? '#E8F4FD' : 'white'
                }}
              >
                <div className="pet-avatar">🐕</div>
                <div className="pet-info">
                  <div className="pet-name">{pet.name}</div>
                  <div className="pet-details">
                    {pet.breed} • {pet.age} • {pet.weight}
                  </div>
                </div>
                <button className="pet-edit-btn">✏️</button>
              </div>
            ))}
            
            <button className="add-pet-btn" onClick={handleAddPet}>
              <span>+</span> 添加新伙伴
            </button>
          </div>
        </div>
      );
    };

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
