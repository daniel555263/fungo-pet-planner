const FunGoPlanningPage = () => {
  // æŠŠç¬¬ä¸€ä¸ªç»„ä»¶ä» const [selectedCity... åˆ°æœ€åçš„ return ä¹‹å‰çš„æ‰€æœ‰ä»£ç 
  const FunGoPetTravelPlanner = () => {
  const [currentPage, setCurrentPage] = useState('planning');
  const [selectedCity, setSelectedCity] = useState('æ·±åœ³');
  const [locationInput, setLocationInput] = useState('æ·±åœ³');
  const [tripType, setTripType] = useState('local');
  const [currentPets, setCurrentPets] = useState([
    { id: 1, name: 'æ—ºè´¢', type: 'é‡‘æ¯›', category: 'large-dog', emoji: 'ğŸ•', weight: '25kg' }
  ]);
  const [showAddPet, setShowAddPet] = useState(false);
  const [newPet, setNewPet] = useState({ name: '', type: '', weight: '', emoji: 'ğŸ•' });
  const [withChildren, setWithChildren] = useState(false);
  const [selectedPreferences, setSelectedPreferences] = useState(['æµ·æ»¨ä¼‘é—²', 'éƒ½å¸‚æ¢ç´¢']);
  const [isGenerating, setIsGenerating] = useState(false);
  const [generatedTrips, setGeneratedTrips] = useState([]);
  const [selectedTrip, setSelectedTrip] = useState(null);

  const cities = [
    { name: 'åŒ—äº¬', weather: 'â˜€ï¸', temp: '24Â°C', desc: 'é€‚å®œå‡ºè¡Œ', prefs: ['æ–‡åŒ–å¤è¿¹', 'å…¬å›­æ¼«æ­¥'] },
    { name: 'ä¸Šæµ·', weather: 'â›…', temp: '26Â°C', desc: 'é€‚å®œå‡ºè¡Œ', prefs: ['éƒ½å¸‚æ¢ç´¢', 'æ±Ÿæ™¯æ•£æ­¥'] },
    { name: 'æ­å·', weather: 'ğŸŒ¦ï¸', temp: '22Â°C', desc: 'æ³¨æ„é˜²é›¨', prefs: ['æ¹–æ™¯ä¼‘é—²', 'å®¤å†…æ´»åŠ¨'] },
    { name: 'æˆéƒ½', weather: 'â˜ï¸', temp: '20Â°C', desc: 'é€‚å®œå‡ºè¡Œ', prefs: ['ç¾é£Ÿä½“éªŒ', 'æ‚ é—²æ—¶å…‰'] },
    { name: 'æ·±åœ³', weather: 'â˜€ï¸', temp: '28Â°C', desc: 'é€‚å®œå‡ºè¡Œ', prefs: ['æµ·æ»¨ä¼‘é—²', 'éƒ½å¸‚æ¢ç´¢'] }
  ];

  const localInterests = [
    { id: 'beach', label: 'ç©æ°´å¬‰æˆ', icon: 'ğŸ–ï¸' },
    { id: 'run', label: 'ç‹—ç‹—å¥”è·‘', icon: 'ğŸƒ' },
    { id: 'cafe', label: 'å–ä¸‹åˆèŒ¶', icon: 'â˜•' },
    { id: 'park', label: 'å…¬å›­æ¼«æ­¥', icon: 'ğŸŒ³' },
    { id: 'photo', label: 'æ‹ç…§æ‰“å¡', icon: 'ğŸ“¸' },
    { id: 'food', label: 'ç¾é£Ÿæ¢åº—', icon: 'ğŸ½ï¸' }
  ];

  const tripImages = [
    'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&h=500&fit=crop&crop=center',
    'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=800&h=500&fit=crop&crop=center',
    'https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=800&h=500&fit=crop&crop=center'
  ];

  const handleTripTypeChange = (type) => {
    setTripType(type);
    if (type === 'local') {
      setSelectedCity('æ·±åœ³');
      setLocationInput('æ·±åœ³');
      setSelectedPreferences(['æµ·æ»¨ä¼‘é—²', 'éƒ½å¸‚æ¢ç´¢']);
    } else {
      setSelectedCity('');
      setLocationInput('');
      setSelectedPreferences([]);
    }
  };

  const handleCitySelect = (city) => {
    setSelectedCity(city.name);
    setLocationInput(city.name);
    setSelectedPreferences(city.prefs);
  };

  const toggleInterest = (interestId) => {
    const interest = localInterests.find(i => i.id === interestId);
    if (selectedPreferences.includes(interest.label)) {
      setSelectedPreferences(prev => prev.filter(p => p !== interest.label));
    } else {
      setSelectedPreferences(prev => [...prev, interest.label]);
    }
  };

  const addPet = () => {
    if (newPet.name && newPet.type && newPet.weight) {
      const petEmojis = ['ğŸ•', 'ğŸ±', 'ğŸ°', 'ğŸ¹', 'ğŸ¦', 'ğŸ¦'];
      const randomEmoji = petEmojis[Math.floor(Math.random() * petEmojis.length)];
      
      setCurrentPets([...currentPets, { 
        ...newPet, 
        id: Date.now(),
        emoji: newPet.emoji || randomEmoji
      }]);
      setNewPet({ name: '', type: '', weight: '', emoji: 'ğŸ•' });
      setShowAddPet(false);
    }
  };

  const removePet = (petId) => {
    if (currentPets.length > 1) {
      setCurrentPets(currentPets.filter(pet => pet.id !== petId));
    }
  };

  const generateItinerary = () => {
    if (!selectedCity || !tripType || currentPets.length === 0 || isGenerating) return;
    
    setIsGenerating(true);
    
    setTimeout(() => {
      const baseTrips = tripType === 'local' ? [
        {
          id: 1,
          title: 'æ·±åœ³æ¹¾å…¬å›­å® ç‰©å‹å¥½åŠæ—¥æ¸¸',
          subtitle: 'æµ·æ»¨ä¼‘é—² Â· é€‚åˆå¤§å‹çŠ¬',
          location: 'æ·±åœ³æ¹¾å…¬å›­',
          duration: '3-4å°æ—¶',
          distance: '12km',
          driveTime: '25åˆ†é’Ÿ',
          image: tripImages[0],
          highlights: ['æ²™æ»©ç©æ°´', 'æµ·æ™¯æ­¥é“', 'å® ç‰©å‹å¥½åŒºåŸŸ'],
          description: 'æ·±åœ³æœ€å—æ¬¢è¿çš„å® ç‰©å‹å¥½æµ·æ»¨å…¬å›­',
          rating: 4.8,
          reviews: 1240,
          hotReason: 'å°çº¢ä¹¦å® ç‰©åšä¸»æ¨è',
          dataSources: ['FunGoä¸“ä¸šæ•°æ®', 'å°çº¢ä¹¦çƒ­é—¨', 'å¤§ä¼—ç‚¹è¯„å¥½è¯„']
        },
        {
          id: 2,
          title: 'è²èŠ±å±±å…¬å›­åŸå¸‚æ¢ç´¢',
          subtitle: 'éƒ½å¸‚æ¢ç´¢ Â· é€‚åˆæ‹ç…§',
          location: 'è²èŠ±å±±å…¬å›­',
          duration: '2-3å°æ—¶',
          distance: '8km',
          driveTime: '18åˆ†é’Ÿ',
          image: tripImages[1],
          highlights: ['å±±é¡¶è§‚æ™¯', 'åŸå¸‚å…¨æ™¯', 'insé£æ‹ç…§ç‚¹'],
          description: 'ä¿¯ç°æ·±åœ³CBDå…¨æ™¯çš„æœ€ä½³ä½ç½®',
          rating: 4.6,
          reviews: 856,
          hotReason: 'å¤§ä¼—ç‚¹è¯„æ·±åœ³å¿…å»æ¦œå•',
          dataSources: ['FunGoä¸“ä¸šæ•°æ®', 'å¤§ä¼—ç‚¹è¯„æ¦œå•', 'å°çº¢ä¹¦æ‰“å¡']
        },
        {
          id: 3,
          title: 'åä¾¨åŸåˆ›æ„å›­æ–‡è‰ºä¹‹æ—…',
          subtitle: 'ä¸‹åˆèŒ¶ Â· æ–‡è‰ºæ‰“å¡',
          location: 'OCTåˆ›æ„å›­',
          duration: '2-4å°æ—¶',
          distance: '15km',
          driveTime: '30åˆ†é’Ÿ',
          image: tripImages[2],
          highlights: ['å® ç‰©å‹å¥½å’–å•¡å…', 'åˆ›æ„å›­åŒº', 'ä¸‹åˆèŒ¶ä½“éªŒ'],
          description: 'æ·±åœ³æœ€æœ‰æ–‡è‰ºæ°”æ¯çš„åˆ›æ„å›­åŒº',
          rating: 4.7,
          reviews: 642,
          hotReason: 'æ–‡è‰ºé’å¹´èšé›†åœ°',
          dataSources: ['FunGoä¸“ä¸šæ•°æ®', 'å°çº¢ä¹¦æ–‡è‰ºåšä¸»', 'å¤§ä¼—ç‚¹è¯„å’–å•¡æ¦œ']
        }
      ] : [
        {
          id: 1,
          title: `${selectedCity}å® ç‰©å‹å¥½ç²¾é€‰æ¸¸`,
          subtitle: '3å¤©2æ™šç²¾å“è¡Œç¨‹',
          location: selectedCity,
          duration: '3å¤©2æ™š',
          image: tripImages[0],
          highlights: ['å® ç‰©å‹å¥½é…’åº—', 'ç‰¹è‰²æ™¯ç‚¹', 'å½“åœ°ç¾é£Ÿ'],
          price: 'Â¥1,299',
          rating: 4.8,
          reviews: 128,
          description: 'ä¸“ä¸ºå® ç‰©å®¶åº­æ‰“é€ çš„æ¸©é¦¨è¡Œç¨‹'
        }
      ];

      setGeneratedTrips(baseTrips);
      setIsGenerating(false);
      setCurrentPage('results');
    }, 2000);
  };

  const viewTripDetails = (trip) => {
    setSelectedTrip(trip);
    setCurrentPage('details');
  };

  // Mobile container styles
  const containerStyle = {
    fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
    background: '#f8fafc',
    minHeight: '100vh',
    width: '100%',
    maxWidth: '100vw',
    overflowX: 'hidden',
    paddingBottom: '80px'
  };

  // Planning Page
  if (currentPage === 'planning') {
    return (
      <div style={containerStyle}>
        {/* Header */}
        <div style={{
          background: 'white',
          padding: '20px 16px',
          boxShadow: '0 2px 8px rgba(0,0,0,0.08)',
          position: 'sticky',
          top: 0,
          zIndex: 10
        }}>
          <div style={{
            fontSize: '32px',
            fontWeight: '800',
            letterSpacing: '-1px',
            textAlign: 'center'
          }}>
            <span style={{ color: '#1e293b' }}>Fun</span>
            <span style={{ color: '#3b82f6' }}>Go</span>
            <span style={{
              display: 'inline-block',
              width: '6px',
              height: '6px',
              background: '#f97316',
              borderRadius: '50%',
              marginLeft: '2px',
              verticalAlign: 'super'
            }}></span>
          </div>
          <div style={{
            fontSize: '14px',
            color: '#64748b',
            textAlign: 'center',
            marginTop: '4px'
          }}>
            å’Œæ¯›å­©å­ä¸€èµ·æ¢ç´¢ä¸–ç•Œ
          </div>
        </div>

        {/* Content */}
        <div style={{ padding: '16px' }}>
          {/* Step 1: Trip Type */}
          <div style={{
            background: 'white',
            borderRadius: '16px',
            padding: '20px 16px',
            marginBottom: '16px'
          }}>
            <div style={{
              display: 'flex',
              alignItems: 'center',
              gap: '12px',
              marginBottom: '20px'
            }}>
              <span style={{
                background: '#3b82f6',
                color: 'white',
                width: '28px',
                height: '28px',
                borderRadius: '50%',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                fontSize: '14px',
                fontWeight: '700',
                flexShrink: 0
              }}>1</span>
              <span style={{
                fontSize: '18px',
                fontWeight: '700',
                color: '#1e293b'
              }}>é€‰æ‹©å‡ºè¡Œç±»å‹</span>
            </div>

            <div style={{
              display: 'grid',
              gridTemplateColumns: '1fr 1fr',
              gap: '12px'
            }}>
              <div
                style={{
                  padding: '16px',
                  background: tripType === 'local' ? '#f0f9ff' : '#f8fafc',
                  border: `2px solid ${tripType === 'local' ? '#3b82f6' : '#e2e8f0'}`,
                  borderRadius: '12px',
                  textAlign: 'center',
                  transition: 'all 0.2s'
                }}
                onClick={() => handleTripTypeChange('local')}
              >
                <div style={{ fontSize: '28px', marginBottom: '8px' }}>ğŸ </div>
                <div style={{ fontSize: '14px', fontWeight: '600', marginBottom: '4px' }}>æœ¬åœ°æ¸¸</div>
                <div style={{ fontSize: '12px', color: '#64748b' }}>
                  åœ¨æ‰€åœ¨åŸå¸‚å‘¨è¾¹æ¸¸ç©ï¼Œè½»æ¾ä¾¿æ·
                </div>
              </div>
              <div
                style={{
                  padding: '16px',
                  background: tripType === 'travel' ? '#f0f9ff' : '#f8fafc',
                  border: `2px solid ${tripType === 'travel' ? '#3b82f6' : '#e2e8f0'}`,
                  borderRadius: '12px',
                  textAlign: 'center',
                  transition: 'all 0.2s'
                }}
                onClick={() => handleTripTypeChange('travel')}
              >
                <div style={{ fontSize: '28px', marginBottom: '8px' }}>âœˆï¸</div>
                <div style={{ fontSize: '14px', fontWeight: '600', marginBottom: '4px' }}>é•¿é€”æ¸¸</div>
                <div style={{ fontSize: '12px', color: '#64748b' }}>
                  è·¨åŸå¸‚æ—…è¡Œï¼Œæ·±åº¦ä½“éªŒ
                </div>
              </div>
            </div>
          </div>

          {/* Step 2: Destination */}
          <div style={{
            background: 'white',
            borderRadius: '16px',
            padding: '20px 16px',
            marginBottom: '16px'
          }}>
            <div style={{
              display: 'flex',
              alignItems: 'center',
              gap: '12px',
              marginBottom: '20px'
            }}>
              <span style={{
                background: '#3b82f6',
                color: 'white',
                width: '28px',
                height: '28px',
                borderRadius: '50%',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                fontSize: '14px',
                fontWeight: '700',
                flexShrink: 0
              }}>2</span>
              <span style={{
                fontSize: '18px',
                fontWeight: '700',
                color: '#1e293b'
              }}>
                {tripType === 'local' ? 'ç¡®è®¤æ‰€åœ¨åŸå¸‚' : 'é€‰æ‹©ç›®çš„åœ°'}
              </span>
            </div>

            {tripType === 'local' ? (
              <div>
                <div style={{
                  padding: '16px',
                  background: '#f0f9ff',
                  border: '2px solid #3b82f6',
                  borderRadius: '12px',
                  marginBottom: '20px'
                }}>
                  <div style={{
                    fontSize: '16px',
                    fontWeight: '600',
                    marginBottom: '8px',
                    textAlign: 'center'
                  }}>
                    æ·±åœ³æœ¬åœ°æ¸¸
                  </div>
                  <div style={{
                    fontSize: '14px',
                    color: '#64748b',
                    textAlign: 'center',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    gap: '6px'
                  }}>
                    <span>â˜€ï¸</span>
                    <span>28Â°C é€‚å®œå‡ºè¡Œ</span>
                  </div>
                </div>

                <div style={{ marginBottom: '16px' }}>
                  <div style={{
                    fontSize: '14px',
                    fontWeight: '600',
                    marginBottom: '12px',
                    color: '#1e293b'
                  }}>
                    æƒ³è¦ä»€ä¹ˆæ ·çš„ä½“éªŒï¼Ÿ
                  </div>
                  <div style={{
                    display: 'grid',
                    gridTemplateColumns: 'repeat(3, 1fr)',
                    gap: '8px'
                  }}>
                    {localInterests.map(interest => (
                      <div
                        key={interest.id}
                        style={{
                          padding: '12px 8px',
                          background: selectedPreferences.includes(interest.label) ? '#3b82f6' : 'white',
                          border: `1px solid ${selectedPreferences.includes(interest.label) ? '#3b82f6' : '#e2e8f0'}`,
                          borderRadius: '8px',
                          textAlign: 'center',
                          color: selectedPreferences.includes(interest.label) ? 'white' : '#1e293b',
                          transition: 'all 0.2s'
                        }}
                        onClick={() => toggleInterest(interest.id)}
                      >
                        <div style={{ fontSize: '20px', marginBottom: '4px' }}>{interest.icon}</div>
                        <div style={{ fontSize: '12px', fontWeight: '500' }}>{interest.label}</div>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            ) : (
              <div>
                <div style={{
                  display: 'flex',
                  gap: '8px',
                  marginBottom: '16px'
                }}>
                  <input
                    type="text"
                    style={{
                      flex: 1,
                      padding: '12px',
                      border: '2px solid #e2e8f0',
                      borderRadius: '8px',
                      fontSize: '14px',
                      outline: 'none'
                    }}
                    placeholder="æœç´¢ç›®çš„åœ°åŸå¸‚..."
                    value={locationInput}
                    onChange={(e) => setLocationInput(e.target.value)}
                  />
                  <button
                    style={{
                      padding: '12px',
                      background: '#f8fafc',
                      border: '2px solid #e2e8f0',
                      borderRadius: '8px',
                      fontSize: '18px'
                    }}
                    onClick={() => {
                      navigator.geolocation.getCurrentPosition(() => {
                        setLocationInput('å½“å‰ä½ç½®');
                        setSelectedCity('å½“å‰ä½ç½®');
                      });
                    }}
                  >
                    ğŸ“
                  </button>
                </div>

                <div style={{
                  display: 'grid',
                  gridTemplateColumns: '1fr 1fr',
                  gap: '8px'
                }}>
                  {cities.filter(city => city.name !== 'æ·±åœ³').map(city => (
                    <div
                      key={city.name}
                      style={{
                        padding: '12px',
                        background: selectedCity === city.name ? '#3b82f6' : 'white',
                        border: `1px solid ${selectedCity === city.name ? '#3b82f6' : '#e2e8f0'}`,
                        borderRadius: '8px',
                        color: selectedCity === city.name ? 'white' : '#1e293b',
                        transition: 'all 0.2s'
                      }}
                      onClick={() => handleCitySelect(city)}
                    >
                      <div style={{
                        fontWeight: '600',
                        fontSize: '14px',
                        marginBottom: '4px'
                      }}>
                        {city.name}
                      </div>
                      <div style={{
                        fontSize: '12px',
                        opacity: '0.9',
                        display: 'flex',
                        alignItems: 'center',
                        gap: '4px'
                      }}>
                        <span>{city.weather}</span>
                        <span>{city.temp}</span>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            )}
          </div>

          {/* Step 3: Pets */}
          <div style={{
            background: 'white',
            borderRadius: '16px',
            padding: '20px 16px',
            marginBottom: '16px'
          }}>
            <div style={{
              display: 'flex',
              alignItems: 'center',
              gap: '12px',
              marginBottom: '20px'
            }}>
              <span style={{
                background: '#3b82f6',
                color: 'white',
                width: '28px',
                height: '28px',
                borderRadius: '50%',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                fontSize: '14px',
                fontWeight: '700',
                flexShrink: 0
              }}>3</span>
              <span style={{
                fontSize: '18px',
                fontWeight: '700',
                color: '#1e293b'
              }}>
                ç¡®è®¤åŒè¡Œä¼™ä¼´
              </span>
            </div>

            {/* Pet List */}
            {currentPets.map(pet => (
              <div key={pet.id} style={{
                display: 'flex',
                alignItems: 'center',
                gap: '12px',
                padding: '12px',
                background: '#f0f9ff',
                borderRadius: '8px',
                marginBottom: '8px'
              }}>
                <div style={{
                  fontSize: '24px',
                  width: '48px',
                  height: '48px',
                  background: 'white',
                  borderRadius: '50%',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center'
                }}>
                  {pet.emoji}
                </div>
                <div style={{ flex: 1 }}>
                  <div style={{
                    fontSize: '16px',
                    fontWeight: '600',
                    color: '#1e293b'
                  }}>
                    {pet.name}
                  </div>
                  <div style={{
                    fontSize: '12px',
                    color: '#64748b'
                  }}>
                    {pet.type} Â· {pet.weight}
                  </div>
                </div>
                {currentPets.length > 1 && (
                  <button
                    onClick={() => removePet(pet.id)}
                    style={{
                      background: 'transparent',
                      border: 'none',
                      color: '#ef4444',
                      padding: '4px'
                    }}
                  >
                    <X size={20} />
                  </button>
                )}
              </div>
            ))}

            {/* Add Pet Button */}
            <button
              style={{
                width: '100%',
                padding: '12px',
                background: 'white',
                border: '2px dashed #e2e8f0',
                borderRadius: '8px',
                color: '#64748b',
                fontSize: '14px',
                fontWeight: '500',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                gap: '8px',
                marginTop: '8px'
              }}
              onClick={() => setShowAddPet(true)}
            >
              <Plus size={18} />
              æ·»åŠ å® ç‰©
            </button>

            {/* Children Option */}
            <div style={{
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'space-between',
              padding: '12px',
              background: '#f8fafc',
              borderRadius: '8px',
              marginTop: '12px'
            }}>
              <span style={{
                fontSize: '14px',
                color: '#1e293b',
                fontWeight: '500'
              }}>
                å¸¦å°æœ‹å‹ä¸€èµ·
              </span>
              <button
                style={{
                  width: '48px',
                  height: '24px',
                  borderRadius: '12px',
                  background: withChildren ? '#3b82f6' : '#e2e8f0',
                  border: 'none',
                  position: 'relative',
                  transition: 'all 0.3s'
                }}
                onClick={() => setWithChildren(!withChildren)}
              >
                <div style={{
                  width: '20px',
                  height: '20px',
                  borderRadius: '50%',
                  background: 'white',
                  position: 'absolute',
                  top: '2px',
                  left: withChildren ? '26px' : '2px',
                  transition: 'all 0.3s',
                  boxShadow: '0 2px 4px rgba(0,0,0,0.2)'
                }}></div>
              </button>
            </div>
          </div>
        </div>

        {/* Bottom Action Button */}
        <div style={{
          position: 'fixed',
          bottom: 0,
          left: 0,
          right: 0,
          padding: '16px',
          background: 'white',
          boxShadow: '0 -2px 10px rgba(0,0,0,0.1)'
        }}>
          <button
            style={{
              width: '100%',
              padding: '16px',
              background: selectedCity && tripType && currentPets.length > 0 ? '#3b82f6' : '#e2e8f0',
              color: selectedCity && tripType && currentPets.length > 0 ? 'white' : '#94a3b8',
              border: 'none',
              borderRadius: '12px',
              fontSize: '16px',
              fontWeight: '600',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              gap: '8px'
            }}
            onClick={generateItinerary}
            disabled={!selectedCity || !tripType || currentPets.length === 0}
          >
            {isGenerating ? (
              <>
                <div style={{
                  width: '16px',
                  height: '16px',
                  border: '2px solid white',
                  borderTopColor: 'transparent',
                  borderRadius: '50%',
                  animation: 'spin 1s linear infinite'
                }}></div>
                ç”Ÿæˆä¸­...
              </>
            ) : (
              <>
                âœ¨ ç”Ÿæˆæ—…è¡Œæ–¹æ¡ˆ
              </>
            )}
          </button>
        </div>

        {/* Add Pet Modal */}
        {showAddPet && (
          <div style={{
            position: 'fixed',
            top: 0,
            left: 0,
            right: 0,
            bottom: 0,
            background: 'rgba(0,0,0,0.5)',
            display: 'flex',
            alignItems: 'flex-end',
            zIndex: 100
          }}>
            <div style={{
              background: 'white',
              borderRadius: '24px 24px 0 0',
              padding: '24px 16px',
              width: '100%'
            }}>
              <div style={{
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'space-between',
                marginBottom: '24px'
              }}>
                <h3 style={{
                  fontSize: '18px',
                  fontWeight: '700',
                  margin: 0
                }}>æ·»åŠ å® ç‰©</h3>
                <button
                  onClick={() => setShowAddPet(false)}
                  style={{
                    background: 'transparent',
                    border: 'none',
                    color: '#64748b',
                    padding: '4px'
                  }}
                >
                  <X size={24} />
                </button>
              </div>

              <input
                type="text"
                placeholder="å® ç‰©åå­—"
                value={newPet.name}
                onChange={(e) => setNewPet({...newPet, name: e.target.value})}
                style={{
                  width: '100%',
                  padding: '12px',
                  border: '2px solid #e2e8f0',
                  borderRadius: '8px',
                  fontSize: '14px',
                  marginBottom: '12px',
                  outline: 'none'
                }}
              />
              <input
                type="text"
                placeholder="å“ç§ï¼ˆå¦‚ï¼šé‡‘æ¯›ã€æ³°è¿ªï¼‰"
                value={newPet.type}
                onChange={(e) => setNewPet({...newPet, type: e.target.value})}
                style={{
                  width: '100%',
                  padding: '12px',
                  border: '2px solid #e2e8f0',
                  borderRadius: '8px',
                  fontSize: '14px',
                  marginBottom: '12px',
                  outline: 'none'
                }}
              />
              <input
                type="text"
                placeholder="ä½“é‡ï¼ˆå¦‚ï¼š10kgï¼‰"
                value={newPet.weight}
                onChange={(e) => setNewPet({...newPet, weight: e.target.value})}
                style={{
                  width: '100%',
                  padding: '12px',
                  border: '2px solid #e2e8f0',
                  borderRadius: '8px',
                  fontSize: '14px',
                  marginBottom: '20px',
                  outline: 'none'
                }}
              />

              <button
                onClick={addPet}
                style={{
                  width: '100%',
                  padding: '14px',
                  background: '#3b82f6',
                  color: 'white',
                  border: 'none',
                  borderRadius: '8px',
                  fontSize: '16px',
                  fontWeight: '600'
                }}
              >
                ç¡®è®¤æ·»åŠ 
              </button>
            </div>
          </div>
        )}

        <style>{`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `}</style>
      </div>
    );
  }

  // Results Page
  if (currentPage ===
  // ... æ‰€æœ‰çš„ state å’Œå‡½æ•°
  
  return (
    <div style={{...}}>
      {/* æ‰€æœ‰çš„ JSX ä»£ç  */}
    </div>
  );
};

const FunGoResults = () => {
  // æŠŠç¬¬äºŒä¸ªç»„ä»¶ä» const [currentPage... åˆ°æœ€åçš„æ‰€æœ‰ä»£ç 
const FunGoPetTravelPlanner = () => {
  const [currentPage, setCurrentPage] = useState('planning');
  const [selectedCity, setSelectedCity] = useState('æ·±åœ³');
  const [locationInput, setLocationInput] = useState('æ·±åœ³');
  const [tripType, setTripType] = useState('local');
  const [currentPets, setCurrentPets] = useState([
    { id: 1, name: 'æ—ºè´¢', type: 'é‡‘æ¯›', category: 'large-dog', emoji: 'ğŸ•', weight: '25kg' }
  ]);
  const [showAddPet, setShowAddPet] = useState(false);
  const [newPet, setNewPet] = useState({ name: '', type: '', weight: '', emoji: 'ğŸ•' });
  const [withChildren, setWithChildren] = useState(false);
  const [selectedPreferences, setSelectedPreferences] = useState(['æµ·æ»¨ä¼‘é—²', 'éƒ½å¸‚æ¢ç´¢']);
  const [isGenerating, setIsGenerating] = useState(false);
  const [generatedTrips, setGeneratedTrips] = useState([]);
  const [selectedTrip, setSelectedTrip] = useState(null);

  const cities = [
    { name: 'åŒ—äº¬', weather: 'â˜€ï¸', temp: '24Â°C', desc: 'é€‚å®œå‡ºè¡Œ', prefs: ['æ–‡åŒ–å¤è¿¹', 'å…¬å›­æ¼«æ­¥'] },
    { name: 'ä¸Šæµ·', weather: 'â›…', temp: '26Â°C', desc: 'é€‚å®œå‡ºè¡Œ', prefs: ['éƒ½å¸‚æ¢ç´¢', 'æ±Ÿæ™¯æ•£æ­¥'] },
    { name: 'æ­å·', weather: 'ğŸŒ¦ï¸', temp: '22Â°C', desc: 'æ³¨æ„é˜²é›¨', prefs: ['æ¹–æ™¯ä¼‘é—²', 'å®¤å†…æ´»åŠ¨'] },
    { name: 'æˆéƒ½', weather: 'â˜ï¸', temp: '20Â°C', desc: 'é€‚å®œå‡ºè¡Œ', prefs: ['ç¾é£Ÿä½“éªŒ', 'æ‚ é—²æ—¶å…‰'] },
    { name: 'æ·±åœ³', weather: 'â˜€ï¸', temp: '28Â°C', desc: 'é€‚å®œå‡ºè¡Œ', prefs: ['æµ·æ»¨ä¼‘é—²', 'éƒ½å¸‚æ¢ç´¢'] }
  ];

  const localInterests = [
    { id: 'beach', label: 'ç©æ°´å¬‰æˆ', icon: 'ğŸ–ï¸' },
    { id: 'run', label: 'ç‹—ç‹—å¥”è·‘', icon: 'ğŸƒ' },
    { id: 'cafe', label: 'å–ä¸‹åˆèŒ¶', icon: 'â˜•' },
    { id: 'park', label: 'å…¬å›­æ¼«æ­¥', icon: 'ğŸŒ³' },
    { id: 'photo', label: 'æ‹ç…§æ‰“å¡', icon: 'ğŸ“¸' },
    { id: 'food', label: 'ç¾é£Ÿæ¢åº—', icon: 'ğŸ½ï¸' }
  ];

  const tripImages = [
    'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&h=500&fit=crop&crop=center',
    'https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=800&h=500&fit=crop&crop=center',
    'https://images.unsplash.com/photo-1469474968028-56623f02e42e?w=800&h=500&fit=crop&crop=center'
  ];

  const handleTripTypeChange = (type) => {
    setTripType(type);
    if (type === 'local') {
      setSelectedCity('æ·±åœ³');
      setLocationInput('æ·±åœ³');
      setSelectedPreferences(['æµ·æ»¨ä¼‘é—²', 'éƒ½å¸‚æ¢ç´¢']);
    } else {
      setSelectedCity('');
      setLocationInput('');
      setSelectedPreferences([]);
    }
  };

  const handleCitySelect = (city) => {
    setSelectedCity(city.name);
    setLocationInput(city.name);
    setSelectedPreferences(city.prefs);
  };

  const toggleInterest = (interestId) => {
    const interest = localInterests.find(i => i.id === interestId);
    if (selectedPreferences.includes(interest.label)) {
      setSelectedPreferences(prev => prev.filter(p => p !== interest.label));
    } else {
      setSelectedPreferences(prev => [...prev, interest.label]);
    }
  };

  const addPet = () => {
    if (newPet.name && newPet.type && newPet.weight) {
      const petEmojis = ['ğŸ•', 'ğŸ±', 'ğŸ°', 'ğŸ¹', 'ğŸ¦', 'ğŸ¦'];
      const randomEmoji = petEmojis[Math.floor(Math.random() * petEmojis.length)];
      
      setCurrentPets([...currentPets, { 
        ...newPet, 
        id: Date.now(),
        emoji: newPet.emoji || randomEmoji
      }]);
      setNewPet({ name: '', type: '', weight: '', emoji: 'ğŸ•' });
      setShowAddPet(false);
    }
  };

  const removePet = (petId) => {
    if (currentPets.length > 1) {
      setCurrentPets(currentPets.filter(pet => pet.id !== petId));
    }
  };

  const generateItinerary = () => {
    if (!selectedCity || !tripType || currentPets.length === 0 || isGenerating) return;
    
    setIsGenerating(true);
    
    setTimeout(() => {
      const baseTrips = tripType === 'local' ? [
        {
          id: 1,
          title: 'æ·±åœ³æ¹¾å…¬å›­å® ç‰©å‹å¥½åŠæ—¥æ¸¸',
          subtitle: 'æµ·æ»¨ä¼‘é—² Â· é€‚åˆå¤§å‹çŠ¬',
          location: 'æ·±åœ³æ¹¾å…¬å›­',
          duration: '3-4å°æ—¶',
          distance: '12km',
          driveTime: '25åˆ†é’Ÿ',
          image: tripImages[0],
          highlights: ['æ²™æ»©ç©æ°´', 'æµ·æ™¯æ­¥é“', 'å® ç‰©å‹å¥½åŒºåŸŸ'],
          description: 'æ·±åœ³æœ€å—æ¬¢è¿çš„å® ç‰©å‹å¥½æµ·æ»¨å…¬å›­',
          rating: 4.8,
          reviews: 1240,
          hotReason: 'å°çº¢ä¹¦å® ç‰©åšä¸»æ¨è',
          dataSources: ['FunGoä¸“ä¸šæ•°æ®', 'å°çº¢ä¹¦çƒ­é—¨', 'å¤§ä¼—ç‚¹è¯„å¥½è¯„']
        },
        {
          id: 2,
          title: 'è²èŠ±å±±å…¬å›­åŸå¸‚æ¢ç´¢',
          subtitle: 'éƒ½å¸‚æ¢ç´¢ Â· é€‚åˆæ‹ç…§',
          location: 'è²èŠ±å±±å…¬å›­',
          duration: '2-3å°æ—¶',
          distance: '8km',
          driveTime: '18åˆ†é’Ÿ',
          image: tripImages[1],
          highlights: ['å±±é¡¶è§‚æ™¯', 'åŸå¸‚å…¨æ™¯', 'insé£æ‹ç…§ç‚¹'],
          description: 'ä¿¯ç°æ·±åœ³CBDå…¨æ™¯çš„æœ€ä½³ä½ç½®',
          rating: 4.6,
          reviews: 856,
          hotReason: 'å¤§ä¼—ç‚¹è¯„æ·±åœ³å¿…å»æ¦œå•',
          dataSources: ['FunGoä¸“ä¸šæ•°æ®', 'å¤§ä¼—ç‚¹è¯„æ¦œå•', 'å°çº¢ä¹¦æ‰“å¡']
        },
        {
          id: 3,
          title: 'åä¾¨åŸåˆ›æ„å›­æ–‡è‰ºä¹‹æ—…',
          subtitle: 'ä¸‹åˆèŒ¶ Â· æ–‡è‰ºæ‰“å¡',
          location: 'OCTåˆ›æ„å›­',
          duration: '2-4å°æ—¶',
          distance: '15km',
          driveTime: '30åˆ†é’Ÿ',
          image: tripImages[2],
          highlights: ['å® ç‰©å‹å¥½å’–å•¡å…', 'åˆ›æ„å›­åŒº', 'ä¸‹åˆèŒ¶ä½“éªŒ'],
          description: 'æ·±åœ³æœ€æœ‰æ–‡è‰ºæ°”æ¯çš„åˆ›æ„å›­åŒº',
          rating: 4.7,
          reviews: 642,
          hotReason: 'æ–‡è‰ºé’å¹´èšé›†åœ°',
          dataSources: ['FunGoä¸“ä¸šæ•°æ®', 'å°çº¢ä¹¦æ–‡è‰ºåšä¸»', 'å¤§ä¼—ç‚¹è¯„å’–å•¡æ¦œ']
        }
      ] : [
        {
          id: 1,
          title: `${selectedCity}å® ç‰©å‹å¥½ç²¾é€‰æ¸¸`,
          subtitle: '3å¤©2æ™šç²¾å“è¡Œç¨‹',
          location: selectedCity,
          duration: '3å¤©2æ™š',
          image: tripImages[0],
          highlights: ['å® ç‰©å‹å¥½é…’åº—', 'ç‰¹è‰²æ™¯ç‚¹', 'å½“åœ°ç¾é£Ÿ'],
          price: 'Â¥1,299',
          rating: 4.8,
          reviews: 128,
          description: 'ä¸“ä¸ºå® ç‰©å®¶åº­æ‰“é€ çš„æ¸©é¦¨è¡Œç¨‹'
        }
      ];

      setGeneratedTrips(baseTrips);
      setIsGenerating(false);
      setCurrentPage('results');
    }, 2000);
  };

  const viewTripDetails = (trip) => {
    setSelectedTrip(trip);
    setCurrentPage('details');
  };

  // Mobile container styles
  const containerStyle = {
    fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
    background: '#f8fafc',
    minHeight: '100vh',
    width: '100%',
    maxWidth: '100vw',
    overflowX: 'hidden',
    paddingBottom: '80px'
  };

  // Planning Page
  if (currentPage === 'planning') {
    return (
      <div style={containerStyle}>
        {/* Header */}
        <div style={{
          background: 'white',
          padding: '20px 16px',
          boxShadow: '0 2px 8px rgba(0,0,0,0.08)',
          position: 'sticky',
          top: 0,
          zIndex: 10
        }}>
          <div style={{
            fontSize: '32px',
            fontWeight: '800',
            letterSpacing: '-1px',
            textAlign: 'center'
          }}>
            <span style={{ color: '#1e293b' }}>Fun</span>
            <span style={{ color: '#3b82f6' }}>Go</span>
            <span style={{
              display: 'inline-block',
              width: '6px',
              height: '6px',
              background: '#f97316',
              borderRadius: '50%',
              marginLeft: '2px',
              verticalAlign: 'super'
            }}></span>
          </div>
          <div style={{
            fontSize: '14px',
            color: '#64748b',
            textAlign: 'center',
            marginTop: '4px'
          }}>
            å’Œæ¯›å­©å­ä¸€èµ·æ¢ç´¢ä¸–ç•Œ
          </div>
        </div>

        {/* Content */}
        <div style={{ padding: '16px' }}>
          {/* Step 1: Trip Type */}
          <div style={{
            background: 'white',
            borderRadius: '16px',
            padding: '20px 16px',
            marginBottom: '16px'
          }}>
            <div style={{
              display: 'flex',
              alignItems: 'center',
              gap: '12px',
              marginBottom: '20px'
            }}>
              <span style={{
                background: '#3b82f6',
                color: 'white',
                width: '28px',
                height: '28px',
                borderRadius: '50%',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                fontSize: '14px',
                fontWeight: '700',
                flexShrink: 0
              }}>1</span>
              <span style={{
                fontSize: '18px',
                fontWeight: '700',
                color: '#1e293b'
              }}>é€‰æ‹©å‡ºè¡Œç±»å‹</span>
            </div>

            <div style={{
              display: 'grid',
              gridTemplateColumns: '1fr 1fr',
              gap: '12px'
            }}>
              <div
                style={{
                  padding: '16px',
                  background: tripType === 'local' ? '#f0f9ff' : '#f8fafc',
                  border: `2px solid ${tripType === 'local' ? '#3b82f6' : '#e2e8f0'}`,
                  borderRadius: '12px',
                  textAlign: 'center',
                  transition: 'all 0.2s'
                }}
                onClick={() => handleTripTypeChange('local')}
              >
                <div style={{ fontSize: '28px', marginBottom: '8px' }}>ğŸ </div>
                <div style={{ fontSize: '14px', fontWeight: '600', marginBottom: '4px' }}>æœ¬åœ°æ¸¸</div>
                <div style={{ fontSize: '12px', color: '#64748b' }}>
                  åœ¨æ‰€åœ¨åŸå¸‚å‘¨è¾¹æ¸¸ç©ï¼Œè½»æ¾ä¾¿æ·
                </div>
              </div>
              <div
                style={{
                  padding: '16px',
                  background: tripType === 'travel' ? '#f0f9ff' : '#f8fafc',
                  border: `2px solid ${tripType === 'travel' ? '#3b82f6' : '#e2e8f0'}`,
                  borderRadius: '12px',
                  textAlign: 'center',
                  transition: 'all 0.2s'
                }}
                onClick={() => handleTripTypeChange('travel')}
              >
                <div style={{ fontSize: '28px', marginBottom: '8px' }}>âœˆï¸</div>
                <div style={{ fontSize: '14px', fontWeight: '600', marginBottom: '4px' }}>é•¿é€”æ¸¸</div>
                <div style={{ fontSize: '12px', color: '#64748b' }}>
                  è·¨åŸå¸‚æ—…è¡Œï¼Œæ·±åº¦ä½“éªŒ
                </div>
              </div>
            </div>
          </div>

          {/* Step 2: Destination */}
          <div style={{
            background: 'white',
            borderRadius: '16px',
            padding: '20px 16px',
            marginBottom: '16px'
          }}>
            <div style={{
              display: 'flex',
              alignItems: 'center',
              gap: '12px',
              marginBottom: '20px'
            }}>
              <span style={{
                background: '#3b82f6',
                color: 'white',
                width: '28px',
                height: '28px',
                borderRadius: '50%',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                fontSize: '14px',
                fontWeight: '700',
                flexShrink: 0
              }}>2</span>
              <span style={{
                fontSize: '18px',
                fontWeight: '700',
                color: '#1e293b'
              }}>
                {tripType === 'local' ? 'ç¡®è®¤æ‰€åœ¨åŸå¸‚' : 'é€‰æ‹©ç›®çš„åœ°'}
              </span>
            </div>

            {tripType === 'local' ? (
              <div>
                <div style={{
                  padding: '16px',
                  background: '#f0f9ff',
                  border: '2px solid #3b82f6',
                  borderRadius: '12px',
                  marginBottom: '20px'
                }}>
                  <div style={{
                    fontSize: '16px',
                    fontWeight: '600',
                    marginBottom: '8px',
                    textAlign: 'center'
                  }}>
                    æ·±åœ³æœ¬åœ°æ¸¸
                  </div>
                  <div style={{
                    fontSize: '14px',
                    color: '#64748b',
                    textAlign: 'center',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    gap: '6px'
                  }}>
                    <span>â˜€ï¸</span>
                    <span>28Â°C é€‚å®œå‡ºè¡Œ</span>
                  </div>
                </div>

                <div style={{ marginBottom: '16px' }}>
                  <div style={{
                    fontSize: '14px',
                    fontWeight: '600',
                    marginBottom: '12px',
                    color: '#1e293b'
                  }}>
                    æƒ³è¦ä»€ä¹ˆæ ·çš„ä½“éªŒï¼Ÿ
                  </div>
                  <div style={{
                    display: 'grid',
                    gridTemplateColumns: 'repeat(3, 1fr)',
                    gap: '8px'
                  }}>
                    {localInterests.map(interest => (
                      <div
                        key={interest.id}
                        style={{
                          padding: '12px 8px',
                          background: selectedPreferences.includes(interest.label) ? '#3b82f6' : 'white',
                          border: `1px solid ${selectedPreferences.includes(interest.label) ? '#3b82f6' : '#e2e8f0'}`,
                          borderRadius: '8px',
                          textAlign: 'center',
                          color: selectedPreferences.includes(interest.label) ? 'white' : '#1e293b',
                          transition: 'all 0.2s'
                        }}
                        onClick={() => toggleInterest(interest.id)}
                      >
                        <div style={{ fontSize: '20px', marginBottom: '4px' }}>{interest.icon}</div>
                        <div style={{ fontSize: '12px', fontWeight: '500' }}>{interest.label}</div>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            ) : (
              <div>
                <div style={{
                  display: 'flex',
                  gap: '8px',
                  marginBottom: '16px'
                }}>
                  <input
                    type="text"
                    style={{
                      flex: 1,
                      padding: '12px',
                      border: '2px solid #e2e8f0',
                      borderRadius: '8px',
                      fontSize: '14px',
                      outline: 'none'
                    }}
                    placeholder="æœç´¢ç›®çš„åœ°åŸå¸‚..."
                    value={locationInput}
                    onChange={(e) => setLocationInput(e.target.value)}
                  />
                  <button
                    style={{
                      padding: '12px',
                      background: '#f8fafc',
                      border: '2px solid #e2e8f0',
                      borderRadius: '8px',
                      fontSize: '18px'
                    }}
                    onClick={() => {
                      navigator.geolocation.getCurrentPosition(() => {
                        setLocationInput('å½“å‰ä½ç½®');
                        setSelectedCity('å½“å‰ä½ç½®');
                      });
                    }}
                  >
                    ğŸ“
                  </button>
                </div>

                <div style={{
                  display: 'grid',
                  gridTemplateColumns: '1fr 1fr',
                  gap: '8px'
                }}>
                  {cities.filter(city => city.name !== 'æ·±åœ³').map(city => (
                    <div
                      key={city.name}
                      style={{
                        padding: '12px',
                        background: selectedCity === city.name ? '#3b82f6' : 'white',
                        border: `1px solid ${selectedCity === city.name ? '#3b82f6' : '#e2e8f0'}`,
                        borderRadius: '8px',
                        color: selectedCity === city.name ? 'white' : '#1e293b',
                        transition: 'all 0.2s'
                      }}
                      onClick={() => handleCitySelect(city)}
                    >
                      <div style={{
                        fontWeight: '600',
                        fontSize: '14px',
                        marginBottom: '4px'
                      }}>
                        {city.name}
                      </div>
                      <div style={{
                        fontSize: '12px',
                        opacity: '0.9',
                        display: 'flex',
                        alignItems: 'center',
                        gap: '4px'
                      }}>
                        <span>{city.weather}</span>
                        <span>{city.temp}</span>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            )}
          </div>

          {/* Step 3: Pets */}
          <div style={{
            background: 'white',
            borderRadius: '16px',
            padding: '20px 16px',
            marginBottom: '16px'
          }}>
            <div style={{
              display: 'flex',
              alignItems: 'center',
              gap: '12px',
              marginBottom: '20px'
            }}>
              <span style={{
                background: '#3b82f6',
                color: 'white',
                width: '28px',
                height: '28px',
                borderRadius: '50%',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                fontSize: '14px',
                fontWeight: '700',
                flexShrink: 0
              }}>3</span>
              <span style={{
                fontSize: '18px',
                fontWeight: '700',
                color: '#1e293b'
              }}>
                ç¡®è®¤åŒè¡Œä¼™ä¼´
              </span>
            </div>

            {/* Pet List */}
            {currentPets.map(pet => (
              <div key={pet.id} style={{
                display: 'flex',
                alignItems: 'center',
                gap: '12px',
                padding: '12px',
                background: '#f0f9ff',
                borderRadius: '8px',
                marginBottom: '8px'
              }}>
                <div style={{
                  fontSize: '24px',
                  width: '48px',
                  height: '48px',
                  background: 'white',
                  borderRadius: '50%',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center'
                }}>
                  {pet.emoji}
                </div>
                <div style={{ flex: 1 }}>
                  <div style={{
                    fontSize: '16px',
                    fontWeight: '600',
                    color: '#1e293b'
                  }}>
                    {pet.name}
                  </div>
                  <div style={{
                    fontSize: '12px',
                    color: '#64748b'
                  }}>
                    {pet.type} Â· {pet.weight}
                  </div>
                </div>
                {currentPets.length > 1 && (
                  <button
                    onClick={() => removePet(pet.id)}
                    style={{
                      background: 'transparent',
                      border: 'none',
                      color: '#ef4444',
                      padding: '4px'
                    }}
                  >
                    <X size={20} />
                  </button>
                )}
              </div>
            ))}

            {/* Add Pet Button */}
            <button
              style={{
                width: '100%',
                padding: '12px',
                background: 'white',
                border: '2px dashed #e2e8f0',
                borderRadius: '8px',
                color: '#64748b',
                fontSize: '14px',
                fontWeight: '500',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                gap: '8px',
                marginTop: '8px'
              }}
              onClick={() => setShowAddPet(true)}
            >
              <Plus size={18} />
              æ·»åŠ å® ç‰©
            </button>

            {/* Children Option */}
            <div style={{
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'space-between',
              padding: '12px',
              background: '#f8fafc',
              borderRadius: '8px',
              marginTop: '12px'
            }}>
              <span style={{
                fontSize: '14px',
                color: '#1e293b',
                fontWeight: '500'
              }}>
                å¸¦å°æœ‹å‹ä¸€èµ·
              </span>
              <button
                style={{
                  width: '48px',
                  height: '24px',
                  borderRadius: '12px',
                  background: withChildren ? '#3b82f6' : '#e2e8f0',
                  border: 'none',
                  position: 'relative',
                  transition: 'all 0.3s'
                }}
                onClick={() => setWithChildren(!withChildren)}
              >
                <div style={{
                  width: '20px',
                  height: '20px',
                  borderRadius: '50%',
                  background: 'white',
                  position: 'absolute',
                  top: '2px',
                  left: withChildren ? '26px' : '2px',
                  transition: 'all 0.3s',
                  boxShadow: '0 2px 4px rgba(0,0,0,0.2)'
                }}></div>
              </button>
            </div>
          </div>
        </div>

        {/* Bottom Action Button */}
        <div style={{
          position: 'fixed',
          bottom: 0,
          left: 0,
          right: 0,
          padding: '16px',
          background: 'white',
          boxShadow: '0 -2px 10px rgba(0,0,0,0.1)'
        }}>
          <button
            style={{
              width: '100%',
              padding: '16px',
              background: selectedCity && tripType && currentPets.length > 0 ? '#3b82f6' : '#e2e8f0',
              color: selectedCity && tripType && currentPets.length > 0 ? 'white' : '#94a3b8',
              border: 'none',
              borderRadius: '12px',
              fontSize: '16px',
              fontWeight: '600',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              gap: '8px'
            }}
            onClick={generateItinerary}
            disabled={!selectedCity || !tripType || currentPets.length === 0}
          >
            {isGenerating ? (
              <>
                <div style={{
                  width: '16px',
                  height: '16px',
                  border: '2px solid white',
                  borderTopColor: 'transparent',
                  borderRadius: '50%',
                  animation: 'spin 1s linear infinite'
                }}></div>
                ç”Ÿæˆä¸­...
              </>
            ) : (
              <>
                âœ¨ ç”Ÿæˆæ—…è¡Œæ–¹æ¡ˆ
              </>
            )}
          </button>
        </div>

        {/* Add Pet Modal */}
        {showAddPet && (
          <div style={{
            position: 'fixed',
            top: 0,
            left: 0,
            right: 0,
            bottom: 0,
            background: 'rgba(0,0,0,0.5)',
            display: 'flex',
            alignItems: 'flex-end',
            zIndex: 100
          }}>
            <div style={{
              background: 'white',
              borderRadius: '24px 24px 0 0',
              padding: '24px 16px',
              width: '100%'
            }}>
              <div style={{
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'space-between',
                marginBottom: '24px'
              }}>
                <h3 style={{
                  fontSize: '18px',
                  fontWeight: '700',
                  margin: 0
                }}>æ·»åŠ å® ç‰©</h3>
                <button
                  onClick={() => setShowAddPet(false)}
                  style={{
                    background: 'transparent',
                    border: 'none',
                    color: '#64748b',
                    padding: '4px'
                  }}
                >
                  <X size={24} />
                </button>
              </div>

              <input
                type="text"
                placeholder="å® ç‰©åå­—"
                value={newPet.name}
                onChange={(e) => setNewPet({...newPet, name: e.target.value})}
                style={{
                  width: '100%',
                  padding: '12px',
                  border: '2px solid #e2e8f0',
                  borderRadius: '8px',
                  fontSize: '14px',
                  marginBottom: '12px',
                  outline: 'none'
                }}
              />
              <input
                type="text"
                placeholder="å“ç§ï¼ˆå¦‚ï¼šé‡‘æ¯›ã€æ³°è¿ªï¼‰"
                value={newPet.type}
                onChange={(e) => setNewPet({...newPet, type: e.target.value})}
                style={{
                  width: '100%',
                  padding: '12px',
                  border: '2px solid #e2e8f0',
                  borderRadius: '8px',
                  fontSize: '14px',
                  marginBottom: '12px',
                  outline: 'none'
                }}
              />
              <input
                type="text"
                placeholder="ä½“é‡ï¼ˆå¦‚ï¼š10kgï¼‰"
                value={newPet.weight}
                onChange={(e) => setNewPet({...newPet, weight: e.target.value})}
                style={{
                  width: '100%',
                  padding: '12px',
                  border: '2px solid #e2e8f0',
                  borderRadius: '8px',
                  fontSize: '14px',
                  marginBottom: '20px',
                  outline: 'none'
                }}
              />

              <button
                onClick={addPet}
                style={{
                  width: '100%',
                  padding: '14px',
                  background: '#3b82f6',
                  color: 'white',
                  border: 'none',
                  borderRadius: '8px',
                  fontSize: '16px',
                  fontWeight: '600'
                }}
              >
                ç¡®è®¤æ·»åŠ 
              </button>
            </div>
          </div>
        )}

        <style>{`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `}</style>
      </div>
    );
  }

  // Results Page
  if (currentPage === 'results') {
    return (
      <div style={containerStyle}>
        {/* Header */}
        <div style={{
          background: 'white',
          padding: '16px',
          boxShadow: '0 2px 8px rgba(0,0,0,0.08)',
          position: 'sticky',
          top: 0,
          zIndex: 10,
          display: 'flex',
          alignItems: 'center',
          gap: '12px'
        }}>
          <button
            onClick={() => setCurrentPage('planning')}
            style={{
              background: 'transparent',
              border: 'none',
              padding: '4px',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center'
            }}
          >
            <ArrowLeft size={24} />
          </button>
          <div style={{ flex: 1 }}>
            <div style={{
              fontSize: '18px',
              fontWeight: '700',
              color: '#1e293b'
            }}>
              æ¨èæ–¹æ¡ˆ
            </div>
            <div style={{
              fontSize: '12px',
              color: '#64748b'
            }}>
              {tripType === 'local' ? 'æ·±åœ³æœ¬åœ°' : selectedCity} Â· {currentPets[0].name}çš„æ—…è¡Œ
            </div>
          </div>
        </div>

        {/* Trip Cards */}
        <div style={{ padding: '16px' }}>
          {generatedTrips.map((trip, index) => (
            <div
              key={trip.id}
              style={{
                background: 'white',
                borderRadius: '16px',
                overflow: 'hidden',
                marginBottom: '16px',
                boxShadow: '0 2px 8px rgba(0,0,0,0.08)'
              }}
              onClick={() => viewTripDetails(trip)}
            >
              {/* Image */}
              <div style={{
                height: '180px',
                background: `url(${trip.image}) center/cover`,
                position: 'relative'
              }}>
                <div style={{
                  position: 'absolute',
                  top: '12px',
                  left: '12px',
                  background: 'rgba(0,0,0,0.6)',
                  color: 'white',
                  padding: '4px 8px',
                  borderRadius: '8px',
                  fontSize: '12px',
                  fontWeight: '500'
                }}>
                  æ–¹æ¡ˆ {index + 1}
                </div>
                {trip.hotReason && (
                  <div style={{
                    position: 'absolute',
                    bottom: '12px',
                    left: '12px',
                    background: '#ff6b6b',
                    color: 'white',
                    padding: '4px 8px',
                    borderRadius: '8px',
                    fontSize: '11px',
                    fontWeight: '500'
                  }}>
                    ğŸ”¥ {trip.hotReason}
                  </div>
                )}
              </div>

              {/* Content */}
              <div style={{ padding: '16px' }}>
                <h3 style={{
                  fontSize: '16px',
                  fontWeight: '700',
                  color: '#1e293b',
                  marginBottom: '4px'
                }}>
                  {trip.title}
                </h3>
                <p style={{
                  fontSize: '12px',
                  color: '#64748b',
                  marginBottom: '12px'
                }}>
                  {trip.subtitle}
                </p>

                {/* Info Grid */}
                <div style={{
                  display: 'grid',
                  gridTemplateColumns: '1fr 1fr',
                  gap: '8px',
                  marginBottom: '12px'
                }}>
                  <div style={{
                    display: 'flex',
                    alignItems: 'center',
                    gap: '4px',
                    fontSize: '12px',
                    color: '#64748b'
                  }}>
                    <Clock size={14} />
                    {trip.duration}
                  </div>
                  <div style={{
                    display: 'flex',
                    alignItems: 'center',
                    gap: '4px',
                    fontSize: '12px',
                    color: '#64748b'
                  }}>
                    <MapPin size={14} />
                    {trip.distance || trip.location}
                  </div>
                </div>

                {/* Highlights */}
                <div style={{
                  display: 'flex',
                  flexWrap: 'wrap',
                  gap: '6px',
                  marginBottom: '12px'
                }}>
                  {trip.highlights.slice(0, 3).map((highlight, idx) => (
                    <span
                      key={idx}
                      style={{
                        background: '#f0f9ff',
                        color: '#3b82f6',
                        padding: '4px 8px',
                        borderRadius: '6px',
                        fontSize: '11px',
                        fontWeight: '500'
                      }}
                    >
                      {highlight}
                    </span>
                  ))}
                </div>

                {/* Rating and Action */}
                <div style={{
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'space-between'
                }}>
                  <div style={{
                    display: 'flex',
                    alignItems: 'center',
                    gap: '8px'
                  }}>
                    <div style={{
                      display: 'flex',
                      alignItems: 'center',
                      gap: '2px'
                    }}>
                      <Star size={14} fill="#fbbf24" color="#fbbf24" />
                      <span style={{
                        fontSize: '14px',
                        fontWeight: '600',
                        color: '#1e293b'
                      }}>{trip.rating}</span>
                    </div>
                    <span style={{
                      fontSize: '12px',
                      color: '#64748b'
                    }}>
                      ({trip.reviews}æ¡è¯„ä»·)
                    </span>
                  </div>
                  <ChevronRight size={20} color="#94a3b8" />
                </div>
              </div>
            </div>
          ))}
        </div>

        {/* Bottom Action */}
        <div style={{
          position: 'fixed',
          bottom: 0,
          left: 0,
          right: 0,
          padding: '16px',
          background: 'white',
          boxShadow: '0 -2px 10px rgba(0,0,0,0.1)'
        }}>
          <button
            style={{
              width: '100%',
              padding: '14px',
              background: '#3b82f6',
              color: 'white',
              border: 'none',
              borderRadius: '12px',
              fontSize: '16px',
              fontWeight: '600'
            }}
            onClick={() => setCurrentPage('planning')}
          >
            é‡æ–°è§„åˆ’
          </button>
        </div>
      </div>
    );
  }

  // Details Page
  if (currentPage === 'details' && selectedTrip) {
    const details = {
      1: {
        whyRecommend: [
          'ğŸŒŠ 9å…¬é‡Œæµ·å²¸çº¿ï¼Œæ·±åœ³æœ€é•¿çš„æµ·æ»¨æ­¥é“',
          'ğŸ–ï¸ ä¸“é—¨çš„å® ç‰©æ´»åŠ¨åŒºåŸŸ',
          'ğŸš— å……è¶³çš„åœè½¦ä½ï¼Œäº¤é€šä¾¿åˆ©',
          'ğŸ’§ å¤šä¸ªé¥®æ°´ç‚¹å’Œå® ç‰©ä¾¿æ°‘è®¾æ–½'
        ],
        tips: [
          'å»ºè®®ä¸‹åˆ4ç‚¹åå‰å¾€ï¼Œé¿å¼€æ­£åˆé˜³å…‰',
          'è®°å¾—å¸¦ä¸Šå® ç‰©é¥®ç”¨æ°´å’Œé®é˜³ä¼',
          'æµ·è¾¹é£å¤§ï¼Œå°å‹çŠ¬æ³¨æ„ä¿æš–',
          'æ²™æ»©ç©è€åè®°å¾—æ¸…æ´å® ç‰©è„šæŒ'
        ],
        facilities: ['å…è´¹åœè½¦', 'å® ç‰©é¥®æ°´ç‚¹', 'åƒåœ¾è¢‹æä¾›', 'å® ç‰©æ¸…æ´åŒº'],
        bestTime: 'ä¸‹åˆ4:00-6:30',
        crowdLevel: 'å·¥ä½œæ—¥è¾ƒå°‘ï¼Œå‘¨æœ«ä¸­ç­‰'
      },
      2: {
        whyRecommend: [
          'ğŸ”ï¸ æ·±åœ³å¸‚ä¸­å¿ƒåˆ¶é«˜ç‚¹ï¼Œ360åº¦ä¿¯ç°CBD',
          'ğŸ• å±±è·¯å¹³ç¼“ï¼Œé€‚åˆå„ç§ä½“å‹å® ç‰©',
          'ğŸ“¸ å¤šä¸ªè§‚æ™¯å¹³å°ï¼Œæ‹ç…§æ‰“å¡ç»ä½³',
          'ğŸŒ³ ç»¿æ ‘æˆè«ï¼Œç©ºæ°”æ¸…æ–°'
        ],
        tips: [
          'ç™»å±±è·¯çº¿æœ‰é«˜ä½å·®ï¼Œå»ºè®®å¸¦æ°´',
          'å±±é¡¶é£æ™¯æœ€ä½³ï¼Œæ³¨æ„å® ç‰©å®‰å…¨',
          'æ—©æ™¨æˆ–å‚æ™šå…‰çº¿æœ€ä½³',
          'å‘¨æœ«äººè¾ƒå¤šï¼Œå»ºè®®å·¥ä½œæ—¥å‰å¾€'
        ],
        facilities: ['å…è´¹å…¥å›­', 'ä¼‘æ¯äº­', 'è§‚æ™¯å¹³å°', 'é¥®æ°´ç‚¹'],
        bestTime: 'æ—©ä¸Š8:00-10:00',
        crowdLevel: 'å·¥ä½œæ—¥è¾ƒå°‘ï¼Œå‘¨æœ«è¾ƒå¤š'
      },
      3: {
        whyRecommend: [
          'ğŸ¨ åˆ›æ„å›­åŒºï¼Œå……æ»¡è‰ºæœ¯æ°”æ¯',
          'â˜• å¤šå®¶å® ç‰©å‹å¥½å’–å•¡å…',
          'ğŸ›ï¸ ç‹¬ç«‹è®¾è®¡å¸ˆåº—é“º',
          'ğŸ“± insé£è£…ä¿®ï¼Œéšæ‰‹æ‹å¤§ç‰‡'
        ],
        tips: [
          'éƒ¨åˆ†åº—é“ºå¯¹å® ç‰©æœ‰è¦æ±‚ï¼Œå…ˆè¯¢é—®',
          'åˆ›æ„å›­å†…æœ‰å°é˜¶ï¼Œæ³¨æ„å®‰å…¨',
          'å’–å•¡å…ä¸‹åˆäººå¤šï¼Œå»ºè®®é¢„çº¦',
          'å›­åŒºå†…æœ‰è‰ºæœ¯å±•è§ˆ'
        ],
        facilities: ['å® ç‰©å‹å¥½å’–å•¡å…', 'è‰ºæœ¯å±•è§ˆ', 'åˆ›æ„å•†åº—', 'ä¼‘æ¯åŒº'],
        bestTime: 'ä¸‹åˆ2:00-6:00',
        crowdLevel: 'ä¸‹åˆè¾ƒå¤šï¼Œå‚æ™šé€‚ä¸­'
      }
    };

    const detail = details[selectedTrip.id] || details[1];

    return (
      <div style={containerStyle}>
        {/* Header */}
        <div style={{
          background: 'white',
          padding: '16px',
          boxShadow: '0 2px 8px rgba(0,0,0,0.08)',
          position: 'sticky',
          top: 0,
          zIndex: 10,
          display: 'flex',
          alignItems: 'center',
          gap: '12px'
        }}>
          <button
            onClick={() => setCurrentPage('results')}
            style={{
              background: 'transparent',
              border: 'none',
              padding: '4px',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center'
            }}
          >
            <ArrowLeft size={24} />
          </button>
          <div style={{
            fontSize: '18px',
            fontWeight: '700',
            color: '#1e293b',
            flex: 1
          }}>
            æ–¹æ¡ˆè¯¦æƒ…
          </div>
        </div>

        {/* Hero Image */}
        <div style={{
          height: '240px',
          background: `url(${selectedTrip.image}) center/cover`
        }}></div>

        {/* Content */}
        <div style={{ padding: '16px' }}>
          {/* Title Section */}
          <div style={{
            background: 'white',
            borderRadius: '16px',
            padding: '16px',
            marginBottom: '16px'
          }}>
            <h2 style={{
              fontSize: '20px',
              fontWeight: '700',
              color: '#1e293b',
              marginBottom: '8px'
            }}>
              {selectedTrip.title}
            </h2>
            <p style={{
              fontSize: '14px',
              color: '#64748b',
              marginBottom: '16px'
            }}>
              {selectedTrip.description}
            </p>

            {/* Quick Info */}
            <div style={{
              display: 'grid',
              gridTemplateColumns: '1fr 1fr',
              gap: '12px',
              paddingTop: '16px',
              borderTop: '1px solid #e2e8f0'
            }}>
              <div>
                <div style={{
                  fontSize: '12px',
                  color: '#64748b',
                  marginBottom: '4px'
                }}>æœ€ä½³æ—¶é—´</div>
                <div style={{
                  fontSize: '14px',
                  fontWeight: '600',
                  color: '#1e293b'
                }}>{detail.bestTime}</div>
              </div>
              <div>
                <div style={{
                  fontSize: '12px',
                  color: '#64748b',
                  marginBottom: '4px'
                }}>äººæµæƒ…å†µ</div>
                <div style={{
                  fontSize: '14px',
                  fontWeight: '600',
                  color: '#1e293b'
                }}>{detail.crowdLevel}</div>
              </div>
            </div>
          </div>

          {/* Why Recommend */}
          <div style={{
            background: 'white',
            borderRadius: '16px',
            padding: '16px',
            marginBottom: '16px'
          }}>
            <h3 style={{
              fontSize: '16px',
              fontWeight: '700',
              color: '#1e293b',
              marginBottom: '12px'
            }}>
              ä¸ºä»€ä¹ˆæ¨è
            </h3>
            {detail.whyRecommend.map((reason, idx) => (
              <div key={idx} style={{
                fontSize: '14px',
                color: '#475569',
                marginBottom: '8px',
                lineHeight: '1.5'
              }}>
                {reason}
              </div>
            ))}
          </div>

          {/* Facilities */}
          <div style={{
            background: 'white',
            borderRadius: '16px',
            padding: '16px',
            marginBottom: '16px'
          }}>
            <h3 style={{
              fontSize: '16px',
              fontWeight: '700',
              color: '#1e293b',
              marginBottom: '12px'
            }}>
              è®¾æ–½æœåŠ¡
            </h3>
            <div style={{
              display: 'flex',
              flexWrap: 'wrap',
              gap: '8px'
            }}>
              {detail.facilities.map((facility, idx) => (
                <span
                  key={idx}
                  style={{
                    background: '#f0f9ff',
                    color: '#3b82f6',
                    padding: '6px 12px',
                    borderRadius: '8px',
                    fontSize: '13px',
                    fontWeight: '500'
                  }}
                >
                  âœ“ {facility}
                </span>
              ))}
            </div>
          </div>

          {/* Tips */}
          <div style={{
            background: '#fffbeb',
            borderRadius: '16px',
            padding: '16px',
            marginBottom: '80px'
          }}>
            <h3 style={{
              fontSize: '16px',
              fontWeight: '700',
              color: '#92400e',
              marginBottom: '12px'
            }}>
              ğŸ’¡ è´´å¿ƒæç¤º
            </h3>
            {detail.tips.map((tip, idx) => (
              <div key={idx} style={{
                fontSize: '13px',
                color: '#78350f',
                marginBottom: '6px',
                paddingLeft: '16px',
                position: 'relative'
              }}>
                <span style={{
                  position: 'absolute',
                  left: 0
                }}>â€¢</span>
                {tip}
              </div>
            ))}
          </div>
        </div>

        {/* Bottom Actions */}
        <div style={{
          position: 'fixed',
          bottom: 0,
          left: 0,
          right: 0,
          padding: '16px',
          background: 'white',
          boxShadow: '0 -2px 10px rgba(0,0,0,0.1)',
          display: 'flex',
          gap: '12px'
        }}>
          <button
            style={{
              flex: 1,
              padding: '14px',
              background: 'white',
              color: '#3b82f6',
              border: '2px solid #3b82f6',
              borderRadius: '12px',
              fontSize: '16px',
              fontWeight: '600',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              gap: '6px'
            }}
          >
            <Heart size={18} />
            æ”¶è—
          </button>
          <button
            style={{
              flex: 2,
              padding: '14px',
              background: '#3b82f6',
              color: 'white',
              border: 'none',
              borderRadius: '12px',
              fontSize: '16px',
              fontWeight: '600'
            }}
          >
            å¼€å§‹å¯¼èˆª
          </button>
        </div>
      </div>
    );
  }

  return null;
  // ... æ‰€æœ‰çš„ state å’Œå‡½æ•°
  
  if (currentPage === 'results') {
    return (
      <div style={{...}}>
        {/* ç»“æœé¡µ JSX */}
      </div>
    );
  }
  
  if (currentPage === 'details' && selectedTrip) {
    return (
      <div style={{...}}>
        {/* è¯¦æƒ…é¡µ JSX */}
      </div>
    );
  }
};
